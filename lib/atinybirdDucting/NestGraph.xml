<?xml version="1.0" encoding="utf-8"?>
<graph>
    <lib path="./atinybirdDucting.dll"/>
    
    <config>
        <logfile path="/home/derrick/projects/atinybird/store/build.log" />
    </config>
    
    <!-- Artifact processor -->
    <component key="Finalizer" type="FinalizeArtifactsComponent"/>

    <!-- Path iteration for visible files under /nest/ -->
    <component key="PathIterator" type="DirectoryIteratorComponent">
        <arg type="string">/home/derrick/projects/atinybird/source</arg>
        <arg type="bool">true</arg>
    </component>
    <component key="IsHiddenPath" type="GlobMatchComponent">
        <arg type="string">**/.*</arg>
    </component>
    <component key="IsNestPath" type="GlobMatchComponent">
        <arg type="string">/nest/**</arg>
    </component>

    <connection out="PathIterator.Out" in="IsHiddenPath.In"/>
    <connection out="IsHiddenPath.False" in="IsNestPath.In"/>
    
    <!-- File copying -->
    <component key="FileCopy" type="CopySourceToTargetComponent">
        <arg type="string">/home/derrick/projects/atinybird/source</arg>
        <arg type="string">/home/derrick/projects/atinybird/build</arg>
    </component>

    <connection out="IsNestPath.True" in="FileCopy.In"/>
    <connection out="FileCopy.Out" in="Finalizer.In"/>

    <!-- Thumbnail generation -->
    <component key="GenerateThumb" type="GenerateThumbnailComponent">
        <arg type="string">/home/derrick/projects/atinybird/source</arg>
        <arg type="string">/home/derrick/projects/atinybird/build</arg>
    </component>

    <connection out="IsNestPath.True" in="GenerateThumb.In"/>
    <connection out="GenerateThumb.Out" in="Finalizer.In"/>
    
    <!-- Index generation -->
    <component key="Gallery" type="GalleryComponent">
        <arg type="string">/home/derrick/projects/atinybird/source</arg>
        <arg type="string">/home/derrick/projects/atinybird/build</arg>
        <arg type="string">.index.tmpl</arg>
        <arg type="string">index.html</arg>
    </component>
    <component key="GalleryFinalizer" type="FinalizeArtifactsComponent"/>
    
    <connection out="Finalizer.Out" in="Gallery.In"/>
    <connection out="Gallery.Out" in="GalleryFinalizer.In"/>
</graph>